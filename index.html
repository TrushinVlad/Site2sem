<!DOCTYPE html>
<html lang="ru-RU">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Лабы 1-3</title>
</head>
<body>
    <h1>Трушин Владислав Алексеевич - Лаб. работы №1-3</h1>
    <img class="imgs" id="img1" src ="img/1.jpg" alt="">
    <img class="imgs" id="img2" src ="img/2.jpg" alt="">
    <img class="imgs" id="img3" src ="img/3.jpg" alt="">
    <img class="imgs" id="img4" src ="img/4.jpg" alt="">
    <button id="b_prev">ПРЕДЫДУЩАЯ</button>
    <button id="b_next">СЛЕДУЮЩАЯ</button>
    <button id="modBut">Открыть модальное окно</button>
    <button id="APIbutt">Послать запрос</button>

    <div id="modalW" class="modW">
        <div id="modal" class="mod">
            <form id="Form1" onsubmit="return false;">
                <p>Дата</p>
                <input type="text" id="date"/>
                <p>Город отправления</p>
                <input type="text" id="out"/>
                <p>Город назначения</p>
                <input type="text" id="in"/>
                <p>Тип билета</p>
                <input type="radio" name="ticket" id="ticket1"/>
                <label for="ticket1">Взрослый</label>
                <input type="radio" name="ticket" id="ticket2"/>
                <label for="ticket2">Детский</label>
                <p><button id="modalButClose">Закрыть</button></p>
                <p><input id="submit" type="submit"/></p>
            </form>
        </div>
    </div>

    <script>
        document.getElementById("APIbutt").onclick = function() {
            let r = fetch('https://the-dune-api.herokuapp.com/quotes/4')
            let rr = r.then((res) => { return res.json(); });
            rr.then((data) => {
                console.log(data);
                console.log(data.length);
                document.write("<p>Ответы</p>")
                for (let i = 0; i < data.length; i++)
                    document.write("<p style=\"border: 1px solid black; padding: 5px;\">" + data[i].id + ": " + data[i].quote + "</p>")
            });
            r.catch((e) => {alert("Ошибка на стадии 1!"); });
            rr.catch((e) => {alert("Ошибка на стадии 2!"); });
            r.finally((e) => {alert("Ответ получен!"); });
        }

        let ModalObj = document.getElementById("modal");
        let ModalFClose = function()
        {
            ModalObj.style.display = "none";
        }
        ModalFClose();
        //window.onclick = ModalFClose(); - закрытие окна при клике внешне
        document.getElementById("modalButClose").onclick = ModalFClose;
        document.getElementById("modBut").onclick = function() {
            ModalObj.style.display = "block";
        };
        /*
Полоса прокрутки для всего документа отключается или возвращается.
При клике вне модального окна, оно закрывается.
При клике на кнопку для закрытия окна, оно закрывается. Полоса прокрутки возвращается.
У кнопки в форме отключено стандартное действие браузера, а при нажатии не нее все данные из формы выводятся в консоль в виде объекта. Используйте console.table()
Проверять валидность полей, когда с них уходит фокус (blur).
С помощью setCustomValidity задать собственные сообщения об ошибках.
Для проверки использовать typeMismatch, valueMissing, tooLong, tooShort.
Если поле не проходит валидацию, то обозначить это дополнительно через внешнее оформление с помощью стилей.
        */

        let IDS = document.querySelectorAll(".imgs");
        if (IDS.length > 0) IDS[0].style.display = 'block';
        for (let i = 1; i < IDS.length; i++) IDS[i].style.display = 'none';
        let cur = 0;
        document.getElementById("b_prev").onclick = function() {
            IDS[cur].style.display = 'none';
            cur--;
            if (cur < 0) cur = IDS.length - 1;
            IDS[cur].style.display = 'block';
        };
        document.getElementById("b_next").onclick = function() {
            IDS[cur].style.display = 'none';
            cur++;
            if (cur >= IDS.length) cur = 0;
            IDS[cur].style.display = 'block';
        };
    </script>
    <script src="script.js"></script>
    <script src="script2.js"></script>
</body>
</html>