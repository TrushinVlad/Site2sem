<!DOCTYPE html>
<html lang="ru-RU">

<head>
    <meta charset="UTF-8">
    <title>Лабы 10-12</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/style.css" />
</head>
    <body>
        <header>
            <button type="button" class="btn btn-info" style="margin: 10px 10px" onclick="location.href='/reg'">Регистрация</button>
            
        </header>
        <main id="Main">
            <h1 style="text-align: center">Добро пожаловать!</h1>
            <h2 style="text-align: center">К нам уже присоединились:</h2>
        </main>
        <script>
            let list = document.getElementById("Main");
            let r = fetch('http://localhost:3000/users/all');
            let rr = r.then((res) => { console.log(res); return res.json(); });
            rr.then((data) => {
                console.log(data);
                console.log(data.data.length);
                if (data.status == 0){
                    for (let i = 0; i < data.data.length; i++)
                        list.insertAdjacentHTML('afterend', "<div class=\"card\"><div class=\"cardin\"><div><p class=\"card_client_title\">" + data.data[i].Name + "</p><p class=\"card_client_mail\">" + data.data[i].Email + "</p></div><div style=\"margin: 10px;\"><button type=\"button\" class=\"btn btn-info\" onclick=\"location.href='/users/" + data.data[i].ID +"/view'\">Посмотреть профиль</button></div></div></div>");
                }
            });

            
        </script>
    </body>
</html>